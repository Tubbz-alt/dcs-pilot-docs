---
title: Handling responses from the DCS
weight: 8
last_reviewed_on: 2020-02-27
review_in: 6 weeks
---

# Handling responses from the DCS

If you have submitted a technically correct [passport validity check request][check-passport] then the DCS will respond with an HTTP 200 status code (unless some kind of error occurs). As the response body is not in plain text you will need to process it in order to retrieve the human-readable content.  This is done by [unwrapping][cryptography-wrapper] the JSON object in the response: 

1. Validate the outer signature.
2. Decrypt the contents.
3. Validate the inner signature to reveal the message inside. 

You will make use of your libraryâ€™s JWS signature validation and JWE decryption methods to do this.

## Prerequisites

You should have successfully submitted a request to the DCS which returns HTTP 200.  You will need both the DCS signing certificate we provided and your own encryption private key.

## 1. Retrieve the response body

Using your HTTP library, extract the response body from the DCS http response in a form that can be consumed by your JWS library, such as string. 

## 2. Validate the outer signature

Use your JWS library to validate (remove) the outer signature by passing it the response string along with the DCS signing certificate.  Keep this string with the signature removed for the next step.

## 3. Decrypt the contents

Use your JWE library to decrypt the string from step 2, using your own encryption private key.  Keep this decrypted string for the next step.

## 4. Validate the inner signature

Use your JWS library again to validate (remove) the inner signature by passing it the string from step 3, again using the DCS signing certificate.  Keep this final output for the next step.

## 5. Review and consume the human-readable response

If all has gone well you will have one of these example [responses][check-passport-response].  Note that because DCS returns `HTTP 200` does not mean that the passport is actually valid.  You will need to look at the contents of the response body itself to find out.  Convert the json document in the response to the format required by your application.

<%= partial "partials/links" %>
